{% extends "base.html" %}
{% load i18n static %}

{% block title %}{% trans "Cart" %}{% endblock %}

{% block extra_style %}

ul > li {
    list-style-type: none;
    padding: 1px 0;
}

li, dt, dd {
    color: var(--body-quiet-color);
    font-size: 13px;
    line-height: 20px;
}

ul.errorlist li {
    color: red;
    background-color: #B3B6B7;
    font-size: 13px;
    display: block;
    margin-bottom: 4px;
    overflow-wrap: break-word;
}

{% endblock %}

{% block body %}
<div class="container" style="text-align: center;">
{% if order %}
<div>
    <table class="table table-bordered table-hover">
        <thead class="thead-dark">
        <tr>
            <th style="text-align: center; font-size: 1rem;">#</th>
            <th style="text-align: center; font-size: 1rem;">{% trans "Product" %}</th>
            <th style="text-align: center; font-size: 1rem;">{% trans "Count of Order Item" %}</th>
        </tr>
        </thead>
        <tbody>
        {% for item in order.items.all %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ item.product.title }}</td>
                <td>{{ item.count }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <hr><br>
    <strong>
        <p>{% trans "Total Price" %}: {{ order.readable_total_price }} {% trans "Toman" %}</p>
        <p>{% trans "Final Price" %}: {{ order.readable_final_price }} {% trans "Toman" %}</p>
    </strong>

    {{ form.non_field_errors }}
    <form method="post">
        {% csrf_token %}
        <div class="fieldWrapper">
            {% for hidden in form.hidden_fields %}
                {{ hidden }}
            {% endfor %}
            {% for field in form.visible_fields %}
                {{ field.errors }}
                <h2>{{ field.label_tag }}</h2>{{ field }}
                {% if field.help_text %}
                    <p class="help">{{ field.help_text|safe }}</p>
                {% endif %}
            {% endfor %}
        </div><br>
        <input type="submit" value="{% trans "Apply Discount Code" %}">
    </form><br>

    <a href="{% url 'order:change' %}?order={{ order.id }}&status=P"
    class="btn" style="background-color: #A9CCE3;">
        {% trans "Payment" %}
    </a>
    <a href="{% url 'order:change' %}?order={{ order.id }}&status=C"
    class="btn" style="background-color: tomato;">
        {% trans "Cancel" %}
    </a>
</div>
{% else %}
<h2 style="font-size: 2rem;">{% trans "Empty Basket" %}!</h2>
<i class="gb gb_sentiment_very_satisfied mt-2" style="font-size: 15rem;"></i>
<h2 style="font-size: 2rem;">{% trans "Hope to Buy Again" %}...</h2>
{% endif %}
</div>
{% endblock %}
